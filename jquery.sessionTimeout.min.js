!function(t){jQuery.sessionTimeout=function(e){var o,s,i={title:"Your session is about to expire!",message:"Your session is about to expire.",titleMessage:"Warning: Time Out",stayConnectedBtn:"Stay connected",logoutBtn:"Logout",closeModals:[],keepAliveUrl:"/keep-alive",keepAliveAjaxRequestType:"POST",redirUrl:"/timed-out",logoutUrl:"/log-out",warnAfter:9e5,redirAfter:12e5},a=i;function n(e){switch(e){case"start":o=setTimeout(function(){t.each(a.closeModals,function(e,o){t("#"+o).modal("hide")}),document.title=a.titleMessage,t("#sessionTimeout-dialog").modal("show"),l("start")},a.warnAfter);break;case"stop":clearTimeout(o)}}function l(t){switch(t){case"start":s=setTimeout(function(){window.location=a.redirUrl},a.redirAfter-a.warnAfter);break;case"stop":clearTimeout(s)}}e&&(a=t.extend(i,e)),t("body").append('<div class="modal fade" id="sessionTimeout-dialog"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">'+a.title+'</h4></div><div class="modal-body">'+a.message+'</div><div class="modal-footer"><div class="btn-group"><button id="sessionTimeout-dialog-logout" type="button" class="btn btn-danger">'+a.logoutBtn+'</button><button id="sessionTimeout-dialog-keepalive" type="button" class="btn btn-success" data-dismiss="modal">'+a.stayConnectedBtn+"</button></div></div></div></div></div>"),t("#sessionTimeout-dialog-logout").on("click",function(){window.location=a.logoutUrl}),t("#sessionTimeout-dialog").on("hide.bs.modal",function(){t.ajax({type:a.keepAliveAjaxRequestType,url:a.keepAliveUrl}),l("stop"),n("start")}),n("start")}}(jQuery);
